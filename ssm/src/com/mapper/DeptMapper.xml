<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.DeptDAO">
    <resultMap type="Dept" id="deptResultMap">
       <id column="id" property="id"/>
       <result column="name" property="name"/>
       <result column="manager" property="manager"/>
       <collection property="emps" ofType="Emp" select="loadEmp" column="id">
       </collection>
    </resultMap>
    
    <select id="loadEmp" resultType="Emp">
        select * from emp where deptId=#{deptId}
    </select>
    
	<insert id="add" parameterType="Dept">
		insert into dept values(null,#{name},#{manager})
	</insert>

	<delete id="del" parameterType="int">
		delete from dept where id=#{id}
	</delete>

	<!-- 修改 -->
	<update id="update" parameterType="Dept">
		update dept set name=#{name},manager=#{manager} where id=#{id}
	</update>

	
	<select id="load" resultType="Dept" parameterType="int">
		select id,name,manager from dept where id=#{id}
	</select>

	<select id="show" resultMap="deptResultMap">
		select id,name,manager from dept
	</select>
	
	<select id="check" resultType="Dept" parameterType="String">
		select * from dept where name=#{name}
	</select>

</mapper>

